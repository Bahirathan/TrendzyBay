#pragma checksum "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "719D4F26A5C78C49BE91A9A0B0B742D23059AFAD"
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17929
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP {
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using System.Web.WebPages.Html;
    using WebMatrix.Data;
    using WebMatrix.WebData;
    using Microsoft.Web.WebPages.OAuth;
    using DotNetOpenAuth.AspNet;
    
    
    public class _Page_Admin_Products_AddProduct_cshtml : System.Web.WebPages.WebPage {
        
#line hidden
        
        public _Page_Admin_Products_AddProduct_cshtml() {
        }
        
        protected ASP.global_asax ApplicationInstance {
            get {
                return ((ASP.global_asax)(Context.ApplicationInstance));
            }
        }
        
        public override void Execute() {
WriteLiteral("\r\n");

DefineSection("Scripts", () => {

WriteLiteral("\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 84), Tuple.Create("\"", 122)
, Tuple.Create(Tuple.Create("", 90), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/jquery.validate.min.js")
, 90), false)
);

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 146), Tuple.Create("\"", 196)
, Tuple.Create(Tuple.Create("", 152), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/jquery.validate.unobtrusive.min.js")
, 152), false)
);

WriteLiteral("></script>\r\n\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
        function readURL(input) {
            debugger;
            if (input.value) {

                try
                {

                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('#img')
                        .attr('src', e.target.result)
                        .css('display', '')
                        .width(150)
                        .height(200);

                    };
                    reader.readAsDataURL(input.files[0]);
                }
                catch(Exception )
                {
                    debugger;
                    var imagename='");

            
            #line 28 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                              Write(MensClothe.AspControlUtil.getAppPath());

            
            #line default
            #line hidden
WriteLiteral("/Images/\'+ input.value.split(\'\\\\\').pop();\r\n                 //   var imagename = " +
"\"");

            
            #line 29 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                  Write(MensClothe.AspControlUtil.getFullImagePath(" + input.value.split('\\').pop();+ "));

            
            #line default
            #line hidden
WriteLiteral(@""" ;

                    imagename = imagename.replace('//', '/');
                    $('#img')
                     .attr('src', imagename)
                     .css('display', '');
                
                }
            }
        }
    </script>





");

});

WriteLiteral("\r\n");

            
            #line 47 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
  
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "Add Product";

    // Initialize general page variables
    var productname = "";
    var unitprice = "";
    var ImageUrl = "";
    var quantity = "";
    var categoryid = "";
    var supplierid = "";
    var discont = "";
    var ms = new MemoryStream();
    var SuppItems = new List<SelectListItem>();
    var CatItems = new List<SelectListItem>();

    Validation.RequireField("productname", "You must specify the  Product name.");
    Validation.Add("productname",
        Validator.StringLength(
            maxLength: Int32.MaxValue,
            minLength: 2,
            errorMessage: "product Name Cannot be empty"));


    Validation.RequireField("quantity", "Enter quantity.");
    Validation.Add("quantity",
        Validator.Integer(errorMessage: "quantity required"));


    Validation.RequireField("unitprice", "Enter Unit Price.");
    Validation.Add("unitprice", Validator.Decimal(errorMessage: "Unit Price cannot be empty."));






    List<DAL.Suppliers> SuppliersRecords = DAL.Suppliers.getAllSuppliers();
    if (SuppliersRecords != null)
    {

        SuppItems.Add(new SelectListItem { Text = "Select....", Value = "" });
        foreach (var item in SuppliersRecords)
        {
            SuppItems.Add(new SelectListItem { Text = item.companyname, Value = Convert.ToString(item.supplierid) });

        }

    }

    List<DAL.Category> CatRecords = DAL.Category.getProductRecodCollections();
    if (SuppliersRecords != null)
    {

        //CatItems.Add(new SelectListItem { Text = "Select....", Value = "" });
        foreach (var item in CatRecords)
        {
            CatItems.Add(new SelectListItem { Text = item.categoryname, Value = Convert.ToString(item.categoryid) });

        }

    }

    if (IsPost)
    {
        AntiForgery.Validate();

        HttpPostedFileBase file = Request.Files["ImageUrl"];
        //if (file != null)
        //{
        //    ms = new MemoryStream();
        //    file.InputStream.CopyTo(ms);
        //    // imgStream = ms.ToArray();
        //}


        productname = Request.Form["productname"];
        unitprice = Request.Form["unitprice"];
        ImageUrl = Request.Form["ImageUrl"];
        discont = Request.Form["discontinued"];
        quantity = Request.Form["quantity"];
        categoryid = Request.Form["ddlCat"];
        supplierid = Request.Form["ddlSupp"];

        //System.Drawing.Bitmap image = new System.Drawing.Bitmap(ms);
        //MemoryStream stream = new MemoryStream(16498);
        //image.Save(stream, System.Drawing.Imaging.ImageFormat.Bmp);
        var img = file.FileName.ToString();  //stream.ToArray();


        if (Validation.IsValid())
        {

            Products prd = new Products();
            int result = Products.insert(productname, unitprice, img, quantity, supplierid, categoryid, discont);
            if (result == 0)
            {
                string url = "~/ErrorPage?ErrorMessage=" + "Dabse Error Occured";
                Response.Redirect(url);
            }

            // Create and associate a new entry in the membership database.
            // If successful, continue processing the request


        }
    }

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n<hgroup");

WriteLiteral(" class=\"title\"");

WriteLiteral(">\r\n    <h1>");

            
            #line 157 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
   Write(Page.Title);

            
            #line default
            #line hidden
WriteLiteral(".</h1>\r\n    <h2>Add a new Products Item</h2>\r\n</hgroup>\r\n\r\n<form");

WriteLiteral(" method=\"post\"");

WriteLiteral(" enctype=\"multipart/form-data\"");

WriteLiteral(">\r\n");

WriteLiteral("    ");

            
            #line 162 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
Write(AntiForgery.GetHtml());

            
            #line default
            #line hidden
WriteLiteral("\r\n    ");

WriteLiteral("\r\n");

WriteLiteral("    ");

            
            #line 164 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
Write(Html.ValidationSummary("Adding Products was unsuccessful. Please correct the errors and try again.", excludeFieldErrors: true, htmlAttributes: null));

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n    <fieldset>\r\n        <legend>Registration Form</legend>\r\n        <ol>\r\n\r\n " +
"           <li");

WriteLiteral(" class=\"Clothes\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" for=\"Clothes\"");

WriteLiteral(" \'");

            
            #line 171 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                       if (!ModelState.IsValidField("productname"))
                                      {
            
            #line default
            #line hidden
WriteLiteral("class=\"error-label\"");

            
            #line 172 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                                                       }
            
            #line default
            #line hidden
WriteLiteral("\'>\r\n                    Products Name\r\n                </label>\r\n                " +
"<input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" id=\"productname\"");

WriteLiteral(" name=\"productname\"");

WriteLiteral("  \'");

            
            #line 175 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                                                    Write(Validation.For("productname"));

            
            #line default
            #line hidden
WriteLiteral("\' />\r\n                ");

WriteLiteral("\r\n");

WriteLiteral("                ");

            
            #line 177 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
           Write(Html.ValidationMessage("productname"));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </li>\r\n            <li");

WriteLiteral(" class=\"unitprice\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" for=\"unitprice\"");

WriteLiteral(" \'");

            
            #line 180 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                         if (!ModelState.IsValidField("unitprice"))
                                        {
            
            #line default
            #line hidden
WriteLiteral("class=\"error-label\"");

            
            #line 181 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                                                         }
            
            #line default
            #line hidden
WriteLiteral("\'>\r\n                    Unit price</label>\r\n                <input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" id=\"unitprice\"");

WriteLiteral(" name=\"unitprice\"");

WriteLiteral(" \'");

            
            #line 183 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                                               Write(Validation.For("unitprice"));

            
            #line default
            #line hidden
WriteLiteral("\' />\r\n");

WriteLiteral("                ");

            
            #line 184 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
           Write(Html.ValidationMessage("unitprice"));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </li>\r\n            \r\n            \r\n            <li");

WriteLiteral(" class=\"ImageUrl\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" for=\"ImageUrl\"");

WriteLiteral(" \'");

            
            #line 189 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                        if (!ModelState.IsValidField("ImageUrl"))
                                       {
            
            #line default
            #line hidden
WriteLiteral("class=\"error-label\"");

            
            #line 190 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                                                        }
            
            #line default
            #line hidden
WriteLiteral("\'>\r\n                    Image of the Products</label>\r\n            </li>\r\n\r\n     " +
"       <li>\r\n                <input");

WriteLiteral(" type=\"image\"");

WriteLiteral(" id=\"img\"");

WriteLiteral(" src=\"#\"");

WriteLiteral(" style=\"display: none\"");

WriteLiteral(" alt=\"your image\"");

WriteLiteral(" name=\"ImageUrl\"");

WriteLiteral(" />\r\n            </li>\r\n            <li>\r\n                <input");

WriteLiteral(" type=\'file\'");

WriteLiteral(" id=\"ImageUrl\"");

WriteLiteral(" name=\"ImageUrl\"");

WriteLiteral("   onchange=\"readURL(this);\"");

WriteLiteral(" />\r\n            </li>\r\n\r\n           \r\n            <li");

WriteLiteral(" class=\"quantity\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" for=\"quantity\"");

WriteLiteral(" \'");

            
            #line 203 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                        if (!ModelState.IsValidField("Quantity"))
                                       {
            
            #line default
            #line hidden
WriteLiteral("class=\"error-label\"");

            
            #line 204 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                                                        }
            
            #line default
            #line hidden
WriteLiteral("\'>\r\n                    Enter the quantity</label>\r\n                <input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" id=\"quantity\"");

WriteLiteral(" name=\"quantity\"");

WriteLiteral(" \'");

            
            #line 206 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                                             Write(Validation.For("quantity"));

            
            #line default
            #line hidden
WriteLiteral("\' />\r\n                ");

WriteLiteral("\r\n");

WriteLiteral("                ");

            
            #line 208 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
           Write(Html.ValidationMessage("Quantity"));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </li>\r\n\r\n            <li>\r\n                <label>Select the catego" +
"ry  </label>\r\n\r\n");

WriteLiteral("                ");

            
            #line 214 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
           Write(Html.DropDownList("ddlCat", @CatItems, @CatItems[0]));

            
            #line default
            #line hidden
WriteLiteral("\r\n");

WriteLiteral("                ");

            
            #line 215 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
           Write(Html.ValidationMessage("category"));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </li>\r\n\r\n            <li");

WriteLiteral(" class=\"supplierid\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" for=\"supplierid\"");

WriteLiteral(" \'");

            
            #line 219 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                          if (!ModelState.IsValidField("supplierid"))
                                         {
            
            #line default
            #line hidden
WriteLiteral("  class=\"error-label\"");

            
            #line 220 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
                                                                            }
            
            #line default
            #line hidden
WriteLiteral("\'>\r\n                    Choose Supplier</label>\r\n");

WriteLiteral("                ");

            
            #line 222 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
           Write(Html.DropDownList("ddlSupp", @SuppItems, @SuppItems[0]));

            
            #line default
            #line hidden
WriteLiteral("\r\n                ");

WriteLiteral("\r\n");

WriteLiteral("                ");

            
            #line 224 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
           Write(Html.ValidationMessage("supplierid"));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </li>\r\n\r\n            <li>\r\n                <label>Check whether dis" +
"continued or not ?</label>\r\n                <input");

WriteLiteral(" type=\"checkbox\"");

WriteLiteral(" id=\"discontinued\"");

WriteLiteral(" value=\"1\"");

WriteLiteral(" name=\"discontinued\"");

WriteLiteral(" />\r\n");

WriteLiteral("                ");

            
            #line 230 "I:\Company\MensClothe\Admin\Products\AddProduct.cshtml"
           Write(Html.ValidationMessage("discontinued"));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </li>\r\n\r\n\r\n            <li");

WriteLiteral(" class=\"recaptcha\"");

WriteLiteral("></li>\r\n        </ol>\r\n        <input");

WriteLiteral(" type=\"submit\"");

WriteLiteral(" value=\"Add Clothes\"");

WriteLiteral(" />\r\n    </fieldset>\r\n</form>\r\n");

        }
    }
}
