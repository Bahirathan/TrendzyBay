#pragma checksum "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "CC4B5479067FB8F21D96849736C17DD2AC4B7C81"
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17929
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP {
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using System.Web.WebPages.Html;
    using WebMatrix.Data;
    using WebMatrix.WebData;
    using Microsoft.Web.WebPages.OAuth;
    using DotNetOpenAuth.AspNet;
    
    
    public class _Page_Admin_Products_ModifyProduct_cshtml : System.Web.WebPages.WebPage {
        
#line hidden
        
        public _Page_Admin_Products_ModifyProduct_cshtml() {
        }
        
        protected ASP.global_asax ApplicationInstance {
            get {
                return ((ASP.global_asax)(Context.ApplicationInstance));
            }
        }
        
        public override void Execute() {
WriteLiteral("\r\n");

DefineSection("Scripts", () => {

WriteLiteral("\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 84), Tuple.Create("\"", 122)
, Tuple.Create(Tuple.Create("", 90), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/jquery.validate.min.js")
, 90), false)
);

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 146), Tuple.Create("\"", 196)
, Tuple.Create(Tuple.Create("", 152), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/jquery.validate.unobtrusive.min.js")
, 152), false)
);

WriteLiteral("></script>\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
        function readURL(input) {
            debugger;
            if (input.value) {

                try {

                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('#img')
                        .attr('src', e.target.result)
                        .css('display', '')
                        .width(150)
                        .height(200);

                    };
                    reader.readAsDataURL(input.files[0]);
                }
                catch (Exception) {
                    debugger;
                    var imagename = '");

            
            #line 25 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                Write(MensClothe.AspControlUtil.getAppPath());

            
            #line default
            #line hidden
WriteLiteral("/Images/\' + input.value.split(\'\\\\\').pop();\r\n                    //   var imagenam" +
"e = \"");

            
            #line 26 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                     Write(MensClothe.AspControlUtil.getFullImagePath(" + input.value.split('\\').pop();+ "));

            
            #line default
            #line hidden
WriteLiteral(@""" ;

                    imagename = imagename.replace('//', '/');
                    $('#img')
                     .attr('src', imagename)
                     .css('display', '');

                }
            }
        }
    </script>





");

});

WriteLiteral("\r\n");

            
            #line 44 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
  
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "Clothes";

    Products PrdRecord = null;
    var Price = "";
    var quantity = "";
    var imgurl = "";
    var prdname = "";
    var catid = "";
    var prdid = 0;
    var suppid = "";
    var discon = "";

    var items = new List<SelectListItem>();
    var SuppItems = new List<SelectListItem>();
    var CatItems = new List<SelectListItem>();
    var i = 0;
    Products prd = new Products();

    Validation.RequireField("productname", "You must specify the  Product name.");
    Validation.Add("productname",
        Validator.StringLength(
            maxLength: Int32.MaxValue,
            minLength: 2,
            errorMessage: "product Name Cannot be empty"));


    Validation.RequireField("quantity", "Enter quantity.");
    Validation.Add("quantity",
    Validator.Integer(errorMessage: "quantity required"));


    Validation.RequireField("unitprice", "Enter Unit Price.");
    Validation.Add("unitprice", Validator.Decimal(errorMessage: "Unit Price cannot be empty."));

    List<Products> productRecords = Products.getProductRecodCollections();
    if (productRecords != null)
    {

        items.Add(new SelectListItem { Text = "None", Value = "0" });
        foreach (var item in productRecords)
        {

            items.Add(new SelectListItem { Text = item.name, Value = Convert.ToString(item.ItemID) });

        }

    }



    List<DAL.Suppliers> SuppliersRecords = DAL.Suppliers.getAllSuppliers();
    if (SuppliersRecords != null)
    {

        SuppItems.Add(new SelectListItem { Text = "NONE", Value = "0" });
        foreach (var item in SuppliersRecords)
        {
            SuppItems.Add(new SelectListItem { Text = item.companyname, Value = Convert.ToString(item.supplierid) });

        }

    }

    List<DAL.Category> CatRecords = DAL.Category.getProductRecodCollections();
    if (SuppliersRecords != null)
    {

        CatItems.Add(new SelectListItem { Text = "NONE", Value = "0" });
        foreach (var item in CatRecords)
        {
            CatItems.Add(new SelectListItem { Text = item.categoryname, Value = Convert.ToString(item.categoryid) });

        }

    }

    if (IsPost)
    {
        var detailForm = Request.Form["detailform"];
        var updateDetail = Request.Form["UpdateDetail"];
        var updateConfirm = Request.Form["UpdateConfirm"];

        if (updateDetail != null && !string.IsNullOrEmpty(Request.Form["DDLid"]))
        {
          //  if (!string.IsNullOrEmpty(Request.Form["DDLid"]))
            {
                prdid = int.Parse(Request.Form["DDLid"].ToString());
                Session.Add("prdID", prdid);
            }


           ;
            //   db = Database.Open("mensClothe");

            PrdRecord = Products.getProductDetail(prdid);
            if (PrdRecord != null)
            {
                Price = Convert.ToString(PrdRecord.unitprice);
                catid = Convert.ToString(PrdRecord.categoryID);
                quantity = Convert.ToString(PrdRecord.quantity);
                suppid = Convert.ToString(PrdRecord.supplierID);

                prdname = PrdRecord.name;
                imgurl = PrdRecord.img;
                discon = Convert.ToString(PrdRecord.isAvailable);
            }

        }
        else if (updateConfirm != null && Session["prdID"] != null)
        {
           var productID =int.Parse(Session["prdID"].ToString());
            Price = Request.Form["Price"];
            discon = Request.Form["discontinued"];
            quantity = Request.Form["quantity"];
            catid = Request.Form["ddlCat"];
            suppid = Request.Form["ddlSupp"];
            prdname = Request.Form["pname"];
            HttpPostedFileBase file = Request.Files["ItemImage"];
            var img = file.FileName.Substring(file.FileName.LastIndexOfAny(new[] { '/', '\\' }) + 1); //stream.ToArray();

            i = Products.UpdateProduct(prdname, Price, img, quantity, catid, suppid, discon, productID);
            if (i == 0)
            {
                string url = "~/ErrorPage?ErrorMessage=" + "Dabse Error Occured";
                Response.Redirect(url);
            }
        }

    }


            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n<form");

WriteLiteral(" method=\"post\"");

WriteLiteral(" enctype=\"multipart/form-data\"");

WriteLiteral(">\r\n    <hgroup");

WriteLiteral(" class=\"title\"");

WriteLiteral(">\r\n        <h1>");

            
            #line 180 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
       Write(Page.Title);

            
            #line default
            #line hidden
WriteLiteral(".</h1>\r\n        <h2>Update Supplier</h2>\r\n    </hgroup>\r\n\r\n\r\n");

WriteLiteral("    ");

            
            #line 185 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
Write(AntiForgery.GetHtml());

            
            #line default
            #line hidden
WriteLiteral("\r\n    ");

WriteLiteral("\r\n");

WriteLiteral("    ");

            
            #line 187 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
Write(Html.ValidationSummary("Adding Products was unsuccessful. Please correct the errors and try again.", excludeFieldErrors: true, htmlAttributes: null));

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n    <fieldset>\r\n        <legend>Registration Form</legend>\r\n        <ol>\r\n\r\n " +
"           <li");

WriteLiteral(" class=\"Clothes\"");

WriteLiteral(">\r\n                <label>\r\n                    Select Products Item to be Delete" +
"d:\r\n                </label>\r\n");

WriteLiteral("                ");

            
            #line 197 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
           Write(Html.DropDownList("DDLid", items));

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n\r\n\r\n\r\n            </li>\r\n\r\n        </ol>\r\n\r\n        <div");

WriteLiteral(" id=\"detailform\"");

WriteLiteral("   ");

            
            #line 206 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                if (PrdRecord == null)
                               {
            
            #line default
            #line hidden
WriteLiteral("style=\"display:none;\"");

            
            #line 207 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                                                  }
            
            #line default
            #line hidden
WriteLiteral("\">\r\n\r\n            <ol>\r\n\r\n                <li class=\"Price\">\r\n                   " +
" <label>\r\n                        Product Name</label>\r\n                    <inp" +
"ut type=\"text\" id=\"pname\" name=\"pname\" value=\"");

            
            #line 214 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                                                 Write(prdname);

            
            #line default
            #line hidden
WriteLiteral("\" ) />\r\n                    ");

WriteLiteral("\r\n\r\n                </li>\r\n\r\n\r\n                <li class=\"Price\">\r\n              " +
"      <label>\r\n                        Price</label>\r\n                    <input" +
" type=\"text\" id=\"Price\" name=\"Price\" value=\"");

            
            #line 223 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                                                 Write(Price);

            
            #line default
            #line hidden
WriteLiteral("\" ) />\r\n                    ");

WriteLiteral("\r\n\r\n                </li>\r\n                <li class=\"quantity\">\r\n               " +
"     <label for=\"quantity\">\r\n                        Quantity</label>\r\n         " +
"           <input type=\"text\" id=\"quantity\" name=\"quantity\"  value=\"");

            
            #line 230 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                                                        Write(quantity);

            
            #line default
            #line hidden
WriteLiteral("\" />\r\n                </li>\r\n\r\n\r\n                <li class=\"ItemImage\">\r\n");

            
            #line 235 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                    
            
            #line default
            #line hidden
            
            #line 235 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                     if (imgurl != null)
                    {

            
            #line default
            #line hidden
WriteLiteral("                        <label");

WriteLiteral(" for=\"ItemImage\"");

WriteLiteral(">\r\n                            Image\r\n                        </label>\r\n");

WriteLiteral("                        <img");

WriteLiteral(" id=\"img\"");

WriteAttribute("src", Tuple.Create(" src=\"", 7655), Tuple.Create("\"", 7730)
            
            #line 240 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
, Tuple.Create(Tuple.Create("", 7661), Tuple.Create<System.Object, System.Int32>(MensClothe.AspControlUtil.getFullImagePath(Convert.ToString(imgurl))
            
            #line default
            #line hidden
, 7661), false)
);

WriteLiteral(" alt=\"Red dot\"");

WriteLiteral(" width=\"100\"");

WriteLiteral(" height=\"150\"");

WriteLiteral(">  \r\n");

            
            #line 241 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                    }

            
            #line default
            #line hidden
WriteLiteral("                </li>\r\n                <li class=\"ItemImage\">\r\n                  " +
"  <label for=\"ItemImage\">\r\n                        change   Image\r\n             " +
"       </label>\r\n                    <label for=\"ItemImage\" ");

            
            #line 247 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                            if (!ModelState.IsValidField("ItemImage"))
                                           {
            
            #line default
            #line hidden
WriteLiteral("class=\"error-label\"");

            
            #line 248 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                                                            }
            
            #line default
            #line hidden
WriteLiteral(">\r\n                        Image of the Products</label>\r\n                    <in" +
"put type=\"file\" id=\"ItemImage\"   onchange=\"readURL(this);\" name=\"ItemImage\" />\r\n" +
"                    ");

WriteLiteral("\r\n                </li>\r\n\r\n                <li>\r\n                    <label>Categ" +
"ory  </label>\r\n\r\n");

WriteLiteral("                    ");

            
            #line 257 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
               Write(Html.DropDownList("ddlCat", @CatItems, @CatItems[0]));

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n                </li>\r\n\r\n\r\n                <li class=\"supplierid\">\r\n         " +
"           <label for=\"supplierid\" \'");

            
            #line 263 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                              if (!ModelState.IsValidField("supplierid"))
                                             {
            
            #line default
            #line hidden
WriteLiteral("  class=\"error-label\"");

            
            #line 264 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                                                                }
            
            #line default
            #line hidden
WriteLiteral("\'>\r\n                        Choose Supplier</label>\r\n");

WriteLiteral("                    ");

            
            #line 266 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
               Write(Html.DropDownList("ddlSupp", @SuppItems, @SuppItems[0]));

            
            #line default
            #line hidden
WriteLiteral("\r\n                    ");

WriteLiteral(@"

                </li>

                <li>
                    <label>Check whether discontinued or not ?</label>
                    <input type=""checkbox"" id=""discontinued"" value=""1"" name=""discontinued"" />

                </li>
                <li class=""recaptcha""></li>
            </ol>
            <input type=""submit"" id=""UpdateConfirm"" name=""UpdateConfirm"" value=""Confirm"" />
        </div>
    </fieldset>
    <p>
        <input type=""submit"" id=""UpdateDetail""  name=""UpdateDetail"" value=""Update Products Item""  ");

            
            #line 282 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                                                                                   if (PrdRecord != null)
                                                                                                  {
            
            #line default
            #line hidden
WriteLiteral("style=\"display:none;\"");

            
            #line 283 "I:\Company\MensClothe\Admin\Products\ModifyProduct.cshtml"
                                                                                                                                     }
            
            #line default
            #line hidden
WriteLiteral("\" />\r\n    </p>\r\n    <ul>\r\n        <li><a");

WriteAttribute("href", Tuple.Create(" href=\"", 9735), Tuple.Create("\"", 9744)
, Tuple.Create(Tuple.Create("", 9742), Tuple.Create<System.Object, System.Int32>(Href("~/")
, 9742), false)
);

WriteLiteral(">Home</a></li>\r\n        <li><a");

WriteAttribute("href", Tuple.Create(" href=\"", 9775), Tuple.Create("\"", 9795)
, Tuple.Create(Tuple.Create("", 9782), Tuple.Create<System.Object, System.Int32>(Href("~/Admin/Admin")
, 9782), false)
);

WriteLiteral(">Admin</a></li>\r\n\r\n    </ul>\r\n</form>\r\n");

        }
    }
}
